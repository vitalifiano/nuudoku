
var numSelected = null;
var tileSelected = null;

var errors = 0;

var puzzles = [
    {
        board: [
            "--74916-5",
            "2---6-3-9",
            "-----7-1-",
            "-586----4",
            "--3----9-",
            "--62--187",
            "9-4-7---2",
            "67-83----",
            "81--45---"
        ],
        solution: [
            "387491625",
            "241568379",
            "569327418",
            "758619234",
            "123784596",
            "496253187",
            "934176852",
            "675832941",
            "812945763"
        ]
    },
    {
        board: [
            "5---7-4--",
            "--4-1---7",
            "-8-----6-",
            "--3-5-1--",
            "-9-4-2-8-",
            "--8-9-7--",
            "-7-----3-",
            "6---2-5--",
            "--2-6---9"
        ],
        solution: [
            "596378421",
            "234915867",
            "187642935",
            "423851796",
            "791432658",
            "658197342",
            "879524613",
            "641283579",
            "362769184"
        ]
    },
    {
        board: [
            "9----7---",
            "2---6-3-9",
            "--74---6-",
            "7-3-1---8",
            "5-----2-1",
            "6---7-5-4",
            "-1---68--",
            "--5-2---3",
            "---4----5"
        ],
        solution: [
            "931547286",
            "285169379",
            "647328951",
            "793416528",
            "568932741",
            "614785239",
            "129653874",
            "457291863",
            "836474195"
        ]
    },
    {
        board: [
            "--9-7--1-",
            "2---6---9",
            "6--1-9---",
            "----5--6-",
            "--2-3-1--",
            "-4--8----",
            "---9-7--4",
            "1---2---7",
            "-8--6-9--"
        ],
        solution: [
            "439278615",
            "217563489",
            "658194732",
            "792451863",
            "562783194",
            "341829576",
            "983617254",
            "175942368",
            "824356971"
        ]
    },
    {
        board: [
            "---26-7-1",
            "68--7----",
            "1---45--3",
            "82-1---4-",
            "--46-29--",
            "-5---3-28",
            "7--93---6",
            "----2-68-",
            "4-1-85---"
        ],
        solution: [
            "435269781",
            "682174593",
            "197845623",
            "826137945",
            "354682197",
            "915743862",
            "791358426",
            "248916357",
            "563427819"
        ]
    },
    {
        board: [
            "----8----",
            "--36-----",
            "7--9-2---",
            "-5---7---",
            "----457--",
            "---1---3-",
            "--1----68",
            "--85---1-",
            "9----4---"
        ],
        solution: [
            "694187532",
            "813625974",
            "725934618",
            "159246387",
            "382574196",
            "476193258",
            "231859746",
            "568742139",
            "947361825"
        ]
    },
    {
        board: [
            "-58-------",
            "----7-1-4",
            "---243-9-",
            "----4-7--",
            "-5--7---3",
            "6--5----9",
            "9-6-53---",
            "3-7-2----",
            "-------1-8"
        ],
        solution: [
            "758169432",
            "629347518",
            "431285796",
            "892413675",
            "145976283",
            "673852149",
            "986531724",
            "317428956",
            "524697381"
        ]
    },
    {
        board: [
            "-6-3-2---",
            "---5-1-2-",
            "--18---56",
            "7----95--",
            "---1-3---",
            "--29----3",
            "91---74--",
            "-2-6-5---",
            "---8-6-1-"
        ],
        solution: [
            "461392758",
            "983547126",
            "725186934",
            "347259681",
            "856413279",
            "612978345",
            "198635472",
            "524761893",
            "739824516"
        ]
    },
    {
        board: [
            "----4--2-",
            "8--3-2---",
            "-7-5---3-",
            "--2---6--",
            "-8-4-1-5-",
            "--6---4--",
            "-5---9-8-",
            "---1-8--6",
            "-1--6----"
        ],
        solution: [
            "693784512",
            "851362497",
            "274591638",
            "132957864",
            "987436125",
            "465218379",
            "756143298",
            "328975146",
            "519628734"
        ]
    },
    {
        board: [
            "-9-3-6---",
            "--7-1----",
            "8----4--2",
            "--2-3----",
            "-8---5-1-",
            "----7-8--",
            "2--6----7",
            "----8-4--",
            "---2-5-3-"
        ],
        solution: [
            "495316278",
            "237819465",
            "816257349",
            "172483596",
            "684925713",
            "953761824",
            "249638157",
            "561974832",
            "738592641"
        ]
    },
    {
        board: [
            "8-6-5-9--",
            "--3-7-6--",
            "-9--2--5-",
            "5-8-4--1-",
            "--2-6-7--",
            "-4--3-9-5",
            "-1--9--8-",
            "--9-1-5--",
            "--6-8-2-3"
        ],
        solution: [
            "836451927",
            "123897645",
            "497326185",
            "658749312",
            "312568794",
            "749213856",
            "581934276",
            "274185639",
            "965672481"
        ]
    },
    {
        board: [
            "--6--3-4-",
            "8--9--1--",
            "-1-7-5-2-",
            "--8-2-6--",
            "1-------8",
            "--5-9-4--",
            "-7-4-1-5-",
            "--3--7--6",
            "-6-8--5--"
        ],
        solution: [
            "296583741",
            "837914652",
            "415726938",
            "763842195",
            "124695387",
            "958371426",
            "671458293",
            "582139764",
            "349267518"
        ]
    },
    {
        board: [
            "-8--7--3-",
            "7--2--8--",
            "-1-3-6-9-",
            "--4-3-7--",
            "9-2---3-6",
            "--5-6-1--",
            "-3-1-2-7-",
            "--9--5--8",
            "-5--8--1-"
        ],
        solution: [
            "685479231",
            "791263854",
            "214385697",
            "826143759",
            "937528146",
            "453671982",
            "378912465",
            "142736598",
            "569854713"
        ]
    },
    {
        board: [
            "--2--7--9",
            "-3--4--1-",
            "7-6---4--",
            "-9-8-6-5-",
            "--5-3-2--",
            "-6-1-7-3-",
            "--7---1-5",
            "-8--9--6-",
            "1--2--3--"
        ],
        solution: [
            "182657349",
            "639241785",
            "754698231",
            "293817654",
            "465732198",
            "876194523",
            "327586914",
            "548923167",
            "916475832"
        ]
    },
    {
        board: [
            "-9-3-4-2-",
            "-3-5-1-9-",
            "4-------3",
            "-8-4-2-6-",
            "7--8-9--1",
            "-6-1-5-8-",
            "5-------6",
            "-1-2-6-9-",
            "-4-9-7-3-"
        ],
        solution: [
            "695317482",
            "837526194",
            "412789536",
            "981453267",
            "726849315",
            "364172958",
            "549631728",
            "173268549",
            "258947631"
        ]
    },
    {
        board: [
            "9--2---7-",
            "--4-3-6--",
            "-1---7---",
            "--9---5--",
            "-5---6---",
            "--7---8--",
            "---4---5-",
            "--1-2-3--",
            "-3---5--6"
        ],
        solution: [
            "956281473",
            "284537619",
            "713694582",
            "821946357",
            "435178926",
            "679352841",
            "197463258",
            "568719234",
            "342825196"
        ]
    },
    {
        board: [
            "--4--3--5",
            "-8-1-2-6-",
            "--3-5-7--",
            "-7--9--3-",
            "6-------1",
            "-4--6--8-",
            "--6-8-4--",
            "-1-3-7-2-",
            "5--9--1--"
        ],
        solution: [
            "613872945",
            "985134267",
            "723695814",
            "247589136",
            "569341782",
            "814267593",
            "392756481",
            "178423659",
            "456918327"
        ]
    },
    {
        board: [
            "--7-1--6-",
            "-1---4-3-",
            "3--9-6--2",
            "1--7-9--3",
            "--6---4--",
            "4--5-1--8",
            "2--8-5--9",
            "-6-3---5-",
            "-9--7-2--"
        ],
        solution: [
            "257814963",
            "619235487",
            "384967152",
            "172489536",
            "896351274",
            "435726198",
            "243598615",
            "768142359",
            "921673841"
        ]
    },
    {
        board: [
            "5-------2",
            "-1---3-8-",
            "--7-5-1--",
            "-6-3-1-9-",
            "4--8-6--2",
            "-8-5-4-3-",
            "--1-6-5--",
            "-9-2-3-7-",
            "7-------1"
        ],
        solution: [
            "583694172",
            "914723685",
            "267185194",
            "876351294",
            "435876612",
            "291547836",
            "128469753",
            "659238471",
            "743916528"
        ]
    },
    {
        board: [
            "-6---5-3-",
            "9-4---8-2",
            "--1---2--",
            "----1----",
            "7-9---2-6",
            "----3----",
            "--8---4--",
            "2-1---7-4",
            "-3-2---5-"
        ],
        solution: [
            "863215947",
            "914678352",
            "251943687",
            "385762419",
            "749831265",
            "126594738",
            "578429163",
            "291357846",
            "437186529"
        ]
    },
    {
        board: [
            "-3-6---9-",
            "8-------5",
            "--7-2-8--",
            "-1-8-4-6-",
            "--3---9--",
            "-2-5-3-7-",
            "--5-1-4--",
            "4-------2",
            "-9-7---1-"
        ],
        solution: [
            "134697582",
            "897423615",
            "257812394",
            "613854729",
            "482136957",
            "925743178",
            "375281946",
            "461975823",
            "589367241"
        ]
    },
    {
        board: [
            "-2-8---7-",
            "--6-7-3--",
            "-9---4---",
            "--7-5-9--",
            "-1-----4-",
            "--4-3-2--",
            "---9---1-",
            "--1-6-8--",
            "-8---5-2-"
        ],
        solution: [
            "524819376",
            "186257394",
            "397364158",
            "263785941",
            "915423687",
            "748936215",
            "632598714",
            "471642839",
            "859173462"
        ]
    },
    {
        board: [
            "-1-8---2-",
            "--6-1-4--",
            "-8---6---",
            "--9-3-6--",
            "-3-----7-",
            "--4-8-5--",
            "---3---8-",
            "--7-4-1--",
            "-2-9---6-"
        ],
        solution: [
            "915874623",
            "736215489",
            "284396157",
            "179583264",
            "623941578",
            "854762931",
            "461357892",
            "597428316",
            "328619745"
        ]
    },
    {
        board: [
            "-8---4-6-",
            "--3-5-9--",
            "-5---7---",
            "--2-8-1--",
            "-7-----8-",
            "--9-4-3--",
            "---3---2-",
            "--1-6-4--",
            "-4---5-7-"
        ],
        solution: [
            "281739456",
            "473256981",
            "956187324",
            "632948175",
            "747615839",
            "819473562",
            "395824217",
            "521367498",
            "164598723"
        ]
    }
];






window.onload = function() {
    setGame();
}

function setGame() {
    // Select a random puzzle
    var randomIndex = Math.floor(Math.random() * puzzles.length);
    board = puzzles[randomIndex].board;
    solution = puzzles[randomIndex].solution;

    // Digits 1-9
    for (let i = 1; i <= 9; i++) {
        let number = document.createElement("div");
        number.id = i;
        number.innerText = i;
        number.addEventListener("click", selectNumber);
        number.classList.add("number");
        document.getElementById("digits").appendChild(number);
    }

    // Board 9x9
    for (let r = 0; r < 9; r++) {
        for (let c = 0; c < 9; c++) {
            let tile = document.createElement("div");
            tile.id = r.toString() + "-" + c.toString();
            if (board[r][c] !== "-") {
                tile.innerText = board[r][c];
                tile.classList.add("tile-start");
            }
            if (r == 2 || r == 5) {
                tile.classList.add("horizontal-line");
            }
            if (c == 2 || c == 5) {
                tile.classList.add("vertical-line");
            }
            tile.addEventListener("click", selectTile);
            tile.classList.add("tile");
            document.getElementById("board").append(tile);
        }
    }
}


function selectNumber(){
    if (numSelected != null) {
        numSelected.classList.remove("number-selected");
    }
    numSelected = this;
    numSelected.classList.add("number-selected");
}

function selectTile() {
    if (numSelected) {
        if (this.innerText != "") {
            return;
        }

        // "0-0" "0-1" .. "3-1"
        let coords = this.id.split("-"); //["0", "0"]
        let r = parseInt(coords[0]);
        let c = parseInt(coords[1]);

        if (solution[r][c] == numSelected.id) {
            this.innerText = numSelected.id;
        }
        else {
            errors += 1;
            document.getElementById("errors").innerText = errors;
        }
    }
}
